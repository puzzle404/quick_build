<%= link_to constructors_project_path(project),
            class: 'group block h-full focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white' do %>
  <article class="flex h-full flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm transition-all duration-300 group-hover:-translate-y-1 group-hover:shadow-lg">
    <div class="relative h-48 bg-slate-100">
      <% if project.images.attached? %>
        <% cover = project.images.last %>
        <% if cover.variable? %>
          <%= image_tag cover.variant(resize_to_fill: [960, 640]),
                        class: 'absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105',
                        alt: "Imagen del proyecto #{project.name}" %>
        <% else %>
          <div class="absolute inset-0 flex h-full w-full items-center justify-center bg-gradient-to-br from-slate-100 via-white to-slate-200 text-sm font-medium text-slate-500">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="mr-2 h-5 w-5 text-slate-400" aria-hidden="true">
              <path fill="currentColor" d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm7 1.5L18.5 9H13zM8 13h8v1.5H8zm0 3h8V18H8z"/>
            </svg>
            <span class="truncate">Adjunto: <%= cover.filename.to_s %></span>
          </div>
        <% end %>
      <% else %>
        <div class="absolute inset-0 flex h-full w-full items-center justify-center bg-gradient-to-br from-slate-100 via-white to-slate-200 text-sm font-medium text-slate-500">
          Imagen pendiente
        </div>
      <% end %>

      <div class="absolute left-4 top-4">
        <%= project_status_badge(project) %>
      </div>
    </div>

    <div class="flex flex-1 flex-col gap-5 p-6">
      <div class="space-y-3">
        <h2 class="text-lg font-semibold text-slate-900 transition-colors group-hover:text-indigo-600">
          <%= project.name %>
        </h2>
        <p class="flex items-center gap-2 text-sm text-slate-500">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4 text-indigo-500">
            <path fill="currentColor" d="M12 2a7 7 0 0 0-7 7c0 4.63 5.55 11.2 6.21 11.96a1 1 0 0 0 1.58 0C13.45 20.2 19 13.63 19 9a7 7 0 0 0-7-7m0 16.35C10.12 16 7 11.73 7 9a5 5 0 1 1 10 0c0 2.73-3.12 7-5 9.35M12 7a2 2 0 1 0 2 2a2 2 0 0 0-2-2" />
          </svg>
          <span><%= project.location.presence || 'UbicaciÃ³n no indicada' %></span>
        </p>
      </div>

      <dl class="grid gap-4 text-xs text-slate-500 sm:grid-cols-2">
        <div>
          <dt class="font-semibold uppercase tracking-wide text-slate-400">Inicio</dt>
          <dd class="mt-1 text-sm text-slate-700"><%= formatted_project_date(project.start_date) %></dd>
        </div>
        <div>
          <dt class="font-semibold uppercase tracking-wide text-slate-400">Fin estimado</dt>
          <dd class="mt-1 text-sm text-slate-700"><%= formatted_project_date(project.end_date) %></dd>
        </div>
        <div class="sm:col-span-2">
          <dt class="font-semibold uppercase tracking-wide text-slate-400">Responsable</dt>
          <dd class="mt-1 text-sm text-slate-700"><%= project.owner&.email || 'Sin asignar' %></dd>
        </div>
      </dl>

      <% if project.updated_at.present? %>
        <div class="mt-auto flex items-center gap-2 text-xs text-slate-400">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
          <span>Actualizado hace <%= time_ago_in_words(project.updated_at) %></span>
        </div>
      <% end %>
    </div>
  </article>
<% end %>
