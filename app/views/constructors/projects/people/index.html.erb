<%= render Constructors::Projects::SectionsNavComponent.new(project: @project, current_section: :people) %>

<div class="mt-6 space-y-6">
  <%= render 'shared/section_header', title: 'Recursos humanos', subtitle: 'Agregá personas y gestioná la información del equipo de obra.' do %>
    <% if policy(ProjectPerson.new(project: @project)).create? %>
      <%= render Ui::ButtonComponent.new(label: "Nueva persona", path: new_constructors_project_person_path(@project)) %>
    <% end %>
  <% end %>

  <%= render Ui::SearchPanelComponent.new(
        form_action: constructors_project_people_path(@project),
        query_param: :q,
        query_value: @query,
        placeholder: 'Buscar personas, roles o documento...',
        title: 'Buscador de equipo',
        date_filters: {
          enabled: true,
          from_param: :from_date,
          to_param: :to_date,
          from_value: @from_date,
          to_value: @to_date,
          from_label: 'Desde',
          to_label: 'Hasta'
        }
      ) %>

  <div class="grid gap-4 sm:grid-cols-2">
    <% @people.each do |person| %>
      <%= render Constructors::Projects::People::PersonCardComponent.new(project: @project, person: person) %>
    <% end %>

    <% if @people.empty? %>
      <div class="rounded-2xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-500">
        Todavía no sumaste personas a esta obra.
      </div>
    <% end %>
  </div>
</div>
