<%= turbo_frame_tag 'products' do %>
  <div class="mb-4 overflow-x-auto">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Name</th>
        <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Price</th>
        <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Category</th>
        <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider text-gray-500">Company</th>
        <th class="px-4 py-2"></th>
        <th class="px-4 py-2"></th>
        <th class="px-4 py-2"></th>
        <th class="px-4 py-2"></th>
      </tr>
    </thead>

    <tbody class="divide-y divide-gray-200 bg-white">
      <% products.each do |product| %>
        <tr>
          <td class="px-4 py-2"><%= product.name %></td>
          <td class="px-4 py-2"><%= number_to_currency(product.price_cents / 100.0) %></td>
          <td class="px-4 py-2"><%= product.category&.name %></td>
          <td class="px-4 py-2"><%= product.company&.name %></td>
          <td class="px-4 py-2"><%= link_to 'Show', company_product_path(product.company, product), data: {turbo_frame: "_top"}, class: 'text-indigo-600 hover:underline' %></td>
          <% if user_signed_in? && current_user.company == product.company %>
            <td class="px-4 py-2"><%= link_to 'Edit', edit_company_product_path(product), class: 'text-indigo-600 hover:underline' %></td>
            <td class="px-4 py-2"><%= link_to 'Destroy', product, data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'text-red-600 hover:underline' %></td>
          <% end %>
          <td class="px-4 py-2"><%= render Ui::ButtonComponent.new(label: 'Add to Cart', path: add_item_cart_path(product_id: product.id), turbo_method: :post) %></td>
        </tr>
      <% end %>
    </tbody>

  </table>
  </div>
<% end %>